<% layout("/layouts/boilerplate") %>

    <body>
        <!--- Blogs section --->
        <section class="our-blogs my-2">
            <h2>Your Blogs</h2>
            <div class="d-flex justify-content-end align-items-center">
                <a href="/blogs/new" class="btn">Write Blog &nbsp;&nbsp;<i class="fa-solid fa-arrow-right"></i></a>
            </div>
            <div class="container">
                <div class="row gy-3 my-3">
                    <% if (userBlogs.length> 0) { %>
                        <% userBlogs.forEach(blog=> { %>
                            <div class="col-sm-6 col-md-6 col-lg-3">
                                <div class="card-style card mb-3">
                                    <img src="<%= blog.images.length ? blog.images[0].url : '/img/NOIMG.jpg' %>"
                                        class="card-img-top" alt="<%= blog.title %>">
                                    <div class="card-body card-body-style">
                                        <h5 class="card-title card-title-style">
                                            <%= blog.title %>
                                        </h5>
                                        <p class="card-text card-text-style">
                                            <% let truncatedExcerpt=blog.excerpt.split(/\s+/).slice(0, 11).join(" "); %>
                                                            <%= blog.excerpt.split(/\s+/).length > 11 ? truncatedExcerpt + '...' : blog.excerpt %>
                                          </p>
                                        <a href=" /blogs/<%=blog._id %>" class="btn btn-outline-secondary">Read
                                                More</a>
                                    </div>
                                    <small class="text-muted">
                                        <%= blog.createdAt.toDateString() %>
                                    </small>
                                </div>
                            </div>
                            <% }) %>
                                <% } else { %>
                                    <p>No blogs found. <a href="/blogs/new">Write your first blog</a>!</p>
                                    <% } %>
                </div>
            </div>
        </section>
    </body>